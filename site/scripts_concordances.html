<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Scripts Concordance - PPE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@1.0.4/css/bulma.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        .hero {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)),
            url('https://images.unsplash.com/photo-1513506003901-1e6a229e2d15?q=80&w=1500') center/cover;
            padding: 2rem 0;
        }
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        .language-title {
            margin-top: 3rem;
            border-bottom: 2px solid #3273dc;
            padding-bottom: 0.5rem;
            color: #3273dc;
        }
    </style>
</head>
<body>

    <section class="hero is-info">
        <div class="hero-body has-text-centered">
            <h1 class="title is-2">Scripts de Concordance</h1>
            <p class="subtitle">Analyse multilingue : Anglais, Français, Russe</p>
            <a href="index.html" class="button is-light is-outlined mt-3">
                <span class="icon"><i class="fas fa-home"></i></span>
                <span>Retour à l'accueil</span>
            </a>
        </div>
    </section>

    <section class="section">
        <div class="container">

            <div class="block">
                <h2 class="title is-4 language-title">1 - Script pour l'Anglais (Light)</h2>
                <pre><code>#!/bin/bash

DOSSIER_SOURCE="./dumps-txt/dumps-txt-anglais"
DOSSIER_CIBLE="./concordances/concordances_anglais"
MOTIF="[Ll]ight"

mkdir -p "$DOSSIER_CIBLE"

for fichier_txt in "$DOSSIER_SOURCE"/*.txt; do
    [ -e "$fichier_txt" ] || continue
    nom_fichier=$(basename "$fichier_txt" .txt)
    fichier_html="$DOSSIER_CIBLE/concordance_${nom_fichier}.html"

    echo "&lt;!DOCTYPE html&gt;" &gt; "$fichier_html"
    echo "&lt;html lang=\"en\"&gt;" &gt;&gt; "$fichier_html"
    echo "&lt;head&gt;" &gt;&gt; "$fichier_html"
    echo "    &lt;meta charset=\"UTF-8\"&gt;" &gt;&gt; "$fichier_html"
    echo "    &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css\"&gt;" &gt;&gt; "$fichier_html"
    echo "    &lt;title&gt;Concordance - $nom_fichier&lt;/title&gt;" &gt;&gt; "$fichier_html"
    echo "&lt;/head&gt;" &gt;&gt; "$fichier_html"
    echo "&lt;body&gt;" &gt;&gt; "$fichier_html"
    echo "    &lt;div class=\"container\"&gt;" &gt;&gt; "$fichier_html"
    echo "        &lt;h1 class=\"title mt-5\"&gt;Concordance : $nom_fichier&lt;/h1&gt;" &gt;&gt; "$fichier_html"
    echo "        &lt;table class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"&gt;" &gt;&gt; "$fichier_html"
    echo "            &lt;thead&gt;" &gt;&gt; "$fichier_html"
    echo "                &lt;tr&gt;" &gt;&gt; "$fichier_html"
    echo "                    &lt;th class=\"has-text-right\" style=\"width:45%\"&gt;Contexte gauche&lt;/th&gt;" &gt;&gt; "$fichier_html"
    echo "                    &lt;th class=\"has-text-centered has-text-danger\"&gt;Mot&lt;/th&gt;" &gt;&gt; "$fichier_html"
    echo "                    &lt;th class=\"has-text-left\" style=\"width:45%\"&gt;Contexte droit&lt;/th&gt;" &gt;&gt; "$fichier_html"
    echo "                &lt;/tr&gt;" &gt;&gt; "$fichier_html"
    echo "            &lt;/thead&gt;" &gt;&gt; "$fichier_html"
    echo "            &lt;tbody&gt;" &gt;&gt; "$fichier_html"

    grep -h -E -o ".{0,30}${MOTIF}.{0,30}" "$fichier_txt" | \
    sed 's/&/\&amp;/g; s/&lt;/\&lt;/g; s/&gt;/\&gt;/g' | \
    sed -E "s/(.*)($MOTIF)(.*)/&lt;tr&gt;&lt;td class=\"has-text-right\"&gt;\1&lt;\/td&gt;&lt;td class=\"has-text-centered has-text-danger\"&gt;&lt;strong&gt;\2&lt;\/strong&gt;&lt;\/td&gt;&lt;td class=\"has-text-left\"&gt;\3&lt;\/td&gt;&lt;\/tr&gt;/" &gt;&gt; "$fichier_html"

    echo "            &lt;/tbody&gt;" &gt;&gt; "$fichier_html"
    echo "        &lt;/table&gt;" &gt;&gt; "$fichier_html"
    echo "    &lt;/div&gt;" &gt;&gt; "$fichier_html"
    echo "&lt;/body&gt;" &gt;&gt; "$fichier_html"
    echo "&lt;/html&gt;" &gt;&gt; "$fichier_html"
done</code></pre>
            </div>

            <div class="block">
                <h2 class="title is-4 language-title">2 - Script pour le Français (Lumière)</h2>
                <pre><code>#!/bin/bash

DOSSIER_SOURCE="./dumps-txt/dumps-txt-fra"
DOSSIER_CIBLE="./concordances/concordances_fra"
MOTIF="[Ll]umi[eè]re"

mkdir -p "$DOSSIER_CIBLE"

for fichier_txt in "$DOSSIER_SOURCE"/*.txt; do
    [ -e "$fichier_txt" ] || continue
    nom_base=$(basename "$fichier_txt" .txt)
    fichier_html="$DOSSIER_CIBLE/concordance_${nom_base}.html"

    echo "&lt;!DOCTYPE html&gt;
&lt;html lang=\"fr\"&gt;
&lt;head&gt;
    &lt;meta charset=\"utf-8\" /&gt;
    &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css\"&gt;
    &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"&gt;
    &lt;title&gt;Concordance - $nom_base&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;section class=\"section\"&gt;
&lt;div class=\"container\"&gt;
&lt;h1 class=\"title\"&gt;Concordance : $nom_base&lt;/h1&gt;
&lt;table class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"&gt;
&lt;thead&gt;
&lt;tr&gt;
    &lt;th class=\"has-text-right\"&gt;Contexte gauche&lt;/th&gt;
    &lt;th class=\"has-text-centered\"&gt;Cible&lt;/th&gt;
    &lt;th class=\"has-text-left\"&gt;Contexte droit&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;" &gt; "$fichier_html"

    grep -Eoi ".{0,80}$MOTIF.{0,80}" "$fichier_txt" | while read -r line; do
        echo "$line" | perl -C -pe "use utf8; s/^(.*?)($MOTIF)(.*)$/&lt;tr&gt;&lt;td class=\"has-text-right\"&gt;\$1&lt;\/td&gt;&lt;td class=\"has-text-danger has-text-centered\"&gt;\$2&lt;\/td&gt;&lt;td class=\"has-text-left\"&gt;\$3&lt;\/td&gt;&lt;\/tr&gt;/" &gt;&gt; "$fichier_html"
    done

    echo "&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/section&gt;&lt;/body&gt;&lt;/html&gt;" &gt;&gt; "$fichier_html"
done</code></pre>
            </div>

            <div class="block">
                <h2 class="title is-4 language-title">3 - Script pour le Russe (Свет)</h2>
                <pre><code>#!/bin/bash

DOSSIER_SOURCE="./dumps-txt/dumps-txt-russe"
DOSSIER_CIBLE="./concordances/concordances_russe"
MOTIF="[Сс]вет"

mkdir -p "$DOSSIER_CIBLE"

for fichier_txt in "$DOSSIER_SOURCE"/*.txt; do
    [ -e "$fichier_txt" ] || continue
    nom_base=$(basename "$fichier_txt" .txt)
    fichier_html="$DOSSIER_CIBLE/concordance_${nom_base}.html"

    echo "&lt;html lang=\"ru\"&gt;
&lt;head&gt;
    &lt;meta charset=\"utf-8\" /&gt;
    &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css\"&gt;
    &lt;title&gt;Concordance - $nom_base&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1 class=\"title\"&gt;Concordance : $nom_base&lt;/h1&gt;
    &lt;table class=\"table is-bordered is-striped is-narrow is-hoverable is-fullwidth\"&gt;
        &lt;thead&gt;
            &lt;tr&gt;
                &lt;th class=\"has-text-right\"&gt;Contexte gauche&lt;/th&gt;
                &lt;th class=\"has-text-centered\"&gt;Cible&lt;/th&gt;
                &lt;th class=\"has-text-left\"&gt;Contexte droit&lt;/th&gt;
            &lt;/tr&gt;
        &lt;/thead&gt;
        &lt;tbody&gt;" &gt; "$fichier_html"

    grep -Pio ".{0,80}$MOTIF.{0,80}" "$fichier_txt" | while read -r line; do
        echo "$line" | perl -C -pe "use utf8; s/^(.*?)($MOTIF)(.*)$/&lt;tr&gt;&lt;td class=\"has-text-right\"&gt;\$1&lt;\/td&gt;&lt;td class=\"has-text-danger has-text-centered\"&gt;\$2&lt;\/td&gt;&lt;td class=\"has-text-left\"&gt;\$3&lt;\/td&gt;&lt;\/tr&gt;/" &gt;&gt; "$fichier_html"
    done

    echo "&lt;/tbody&gt;&lt;/table&gt;&lt;/body&gt;&lt;/html&gt;" &gt;&gt; "$fichier_html"
done</code></pre>
            </div>

        </div>
    </section>

    <footer class="footer">
        <div class="content has-text-centered">
            <p>Projet PPE - 2025-2026</p>
        </div>
    </footer>

</body>
</html>
